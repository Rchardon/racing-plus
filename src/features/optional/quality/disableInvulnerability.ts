import g from "../../../globals";

export function setGhostCollisionClass(npc: EntityNPC): void {
  if (!g.config.disableInvulnerability) {
    return;
  }

  // In vanilla, tears will pass through the Wizoobs & Red Ghosts during their "Appear" animation,
  // granting them invulnerability
  // This is because the ghost is set to EntityCollisionClass.ENTCOLL_NONE when they spawn, and then
  // set to EntityCollisionClass.ENTCOLL_PLAYEROBJECTS during their first reappearance
  // Fix the invulnerability by manually setting the EntityCollisionClass
  // This cannot be done in the PostNPCInit callback because setting the EntityCollisionClass there
  // has no effect
  if (npc.FrameCount === 0) {
    npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS;
  }
}
